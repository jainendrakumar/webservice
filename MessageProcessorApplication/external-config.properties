##############################################################################
# external-config.properties
# Separate settings for LoadPipeline vs. MultiDestinationRake
##############################################################################

# ──────────────────────────────────────────────────────────────────────────────
# Server Ports
# ──────────────────────────────────────────────────────────────────────────────

# Port for LoadPipeline endpoint (/receive)
loadpipeline.server.port=9021

# Port for MultiDestinationRake endpoint (/receive-mdr)
mdr.server.port=9022

# ──────────────────────────────────────────────────────────────────────────────
# REST Dispatch Targets
# ──────────────────────────────────────────────────────────────────────────────

# LoadPipeline
target.loadpipeline.rest.url=http://localhost:6506/cris/dev/in/api/loadpipeline
target.loadpipeline.rest.enabled=true

# MultiDestinationRake
target.mdr.rest.url=http://localhost:6506/cris/dev/in/api/multidestinationrake
target.mdr.rest.enabled=true

# ──────────────────────────────────────────────────────────────────────────────
# Archiving (per‑feature)
# ──────────────────────────────────────────────────────────────────────────────

# Enable/disable archiving
archiving.loadpipeline.enabled=true
archive.loadpipeline.incoming.root=archive/loadpipeline/incoming
archive.loadpipeline.merged.root=archive/loadpipeline/merged

archiving.mdr.enabled=true
archive.mdr.incoming.root=archive/mdr/incoming
archive.mdr.merged.root=archive/mdr/merged

# ──────────────────────────────────────────────────────────────────────────────
# Consolidation & Bucket Flush
# ──────────────────────────────────────────────────────────────────────────────

# LoadPipeline time window (s) and optional size trigger
consolidation.loadpipeline.timeframe=4
bucket.loadpipeline.flush.size=1000

# MDR time window (s) and optional size trigger
consolidation.mdr.timeframe=5
bucket.mdr.flush.size=1000

# ──────────────────────────────────────────────────────────────────────────────
# Throttling
# ──────────────────────────────────────────────────────────────────────────────

# LoadPipeline
throttling.loadpipeline.enabled=true
throttling.loadpipeline.limit=5

# MDR
throttling.mdr.enabled=true
throttling.mdr.limit=5

# ──────────────────────────────────────────────────────────────────────────────
# Dead‑Letter & Reporting
# ──────────────────────────────────────────────────────────────────────────────

deadletterqueue.loadpipeline=deadletter/loadpipeline
report.loadpipeline.prefix=report_loadpipeline_

deadletterqueue.mdr=deadletter/mdr
report.mdr.prefix=report_mdr_

# ──────────────────────────────────────────────────────────────────────────────
# Archive Zipper (Daily ZIP + Retention)
# ──────────────────────────────────────────────────────────────────────────────

# LoadPipeline
archive.zipper.loadpipeline.enabled=true
archive.zipper.loadpipeline.cron=0 0 1 * * *
archive.zip.loadpipeline.output=archive/loadpipeline/zipped
archive.zipper.loadpipeline.maxFiles=10

# MDR
archive.zipper.mdr.enabled=true
archive.zipper.mdr.cron=0 0 2 * * *
archive.zip.mdr.output=archive/mdr/zipped
archive.zipper.mdr.maxFiles=10

# ──────────────────────────────────────────────────────────────────────────────
# File‑Based Ingestion (Optional)
# ──────────────────────────────────────────────────────────────────────────────

# LoadPipeline
input.loadpipeline.mode=folder
input.loadpipeline.zip.file=
input.loadpipeline.folder.path=input/loadpipeline
incoming.loadpipeline.priority=port
incoming.loadpipeline.file.delay.seconds=10

# MDR
input.mdr.mode=folder
input.mdr.zip.file=
input.mdr.folder.path=input/mdr
incoming.mdr.priority=port
incoming.mdr.file.delay.seconds=10
